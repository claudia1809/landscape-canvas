<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-Layer Parallax Landscape</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow-x: scroll;
            overflow-y: hidden;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            height: 100vh;
            width: 7500px;
        }
        
        /* Custom scrollbar styling */
        body::-webkit-scrollbar {
            height: 16px;
        }
        
        body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
        }
        
        body::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        body::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.6);
        }
        
        .parallax-container {
            position: relative;
            width: 7500px;
            height: 100vh;
            overflow: hidden;
        }
        
        .parallax-layer {
            position: absolute;
            width: 15000px; /* Larghezza molto maggiore per copertura completa */
            height: 100%;
            bottom: 0;
            left: -3750px; /* Centrato: (15000 - 7500) / 2 = 3750px */
        }
        
        .mountains {
            z-index: 1;
            height: 400px;
            bottom: 0;
        }
        
        .hills {
            z-index: 2;
            height: 300px;
            bottom: 0;
        }
        
        .skyscrapers {
            z-index: 3;
            height: 350px;
            bottom: 0;
        }
        
        .foreground {
            z-index: 4;
            height: 200px;
            bottom: 0;
        }
        
        .fixed-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 15px;
            z-index: 800;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .anchor-point {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        .anchor-point:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .anchor-point-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #4B5563;
        }
        
        .anchor-point-text {
            font-size: 14px;
            color: #4B5563;
        }
        
        .hover-container {
            position: absolute;
            width: 300px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            transform: translate(-50%, -50%);
            z-index: 50;
        }
        
        .hover-container:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }
        
        .sun {
            transition: transform 0.3s ease;
            filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.7));
            position: relative;
            z-index: 50;
        }
        
        .hover-container:hover .sun {
            transform: rotate(15deg);
        }
        
        .cloud-bubble {
            position: absolute;
            top: 150px;
            right: 50px;
            width: 220px;
            opacity: 0;
            transition: all 0.4s ease;
            transform: translateY(-15px) scale(0.85);
            pointer-events: none;
            z-index: 780;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
        }
        
        .hover-container:hover .cloud-bubble {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        
        /* Mobile responsive - show clouds when anchor is centered in viewport */
        @media (max-width: 768px) {
            .hover-container .cloud-bubble {
                opacity: 0.9;
                transform: translateY(0) scale(0.9);
            }
        }
        
        .cloud-path {
            fill: white;
            stroke: #e2e8f0;
            stroke-width: 2;
        }
        
        .cloud-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            text-align: center;
            font-size: 14px;
            color: #4b5563;
            font-weight: 500;
        }
        
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            color: #4b5563;
            z-index: 800;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .anchor-1 { left: 1071px; top: 100px; }
        .anchor-2 { left: 2143px; top: 100px; }
        .anchor-3 { left: 3214px; top: 100px; }
        .anchor-4 { left: 4286px; top: 100px; }
        .anchor-5 { left: 5357px; top: 100px; }
        .anchor-6 { left: 6429px; top: 100px; }
        .anchor-7 { left: 7500px; top: 100px; }
        
        .redirect-message { display: none; }
        
        #anchor2 {
            cursor: pointer;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div class="parallax-container" id="parallax-container">
        <!-- Layer 1: Mountains (Background - Jagged Line) -->
        <div class="parallax-layer mountains" id="mountains-layer">
            <svg width="100%" height="400" viewBox="0 0 15000 400" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Jagged mountain line -->
                <path d="M0,400 L0,300 L375,250 L750,180 L1125,220 L1500,150 L1875,200 L2250,120 L2625,180 L3000,100 L3375,160 L3750,80 L4125,140 L4500,60 L4875,120 L5250,40 L5625,100 L6000,20 L6375,80 L6750,0 L7125,60 L7500,20 L7875,80 L8250,40 L8625,100 L9000,60 L9375,120 L9750,80 L10125,140 L10500,100 L10875,160 L11250,120 L11625,180 L12000,140 L12375,200 L12750,160 L13125,220 L13500,180 L13875,240 L14250,200 L14625,260 L15000,220 L15000,400 Z" fill="#6B7280" />
                
                <!-- Snow caps on highest peaks -->
                <path d="M6750,0 L6630,30 L6870,30 Z M7500,20 L7380,50 L7620,50 Z M5250,40 L5130,70 L5370,70 Z M4500,60 L4380,90 L4620,90 Z" fill="white" />
                
                <!-- Second mountain layer -->
                <path d="M0,400 L0,350 L562,320 L1125,280 L1687,310 L2250,270 L2812,300 L3375,260 L3937,290 L4500,250 L5062,280 L5625,240 L6187,270 L6750,230 L7312,260 L7875,220 L8437,250 L9000,210 L9562,240 L10125,200 L10687,230 L11250,190 L11812,220 L12375,180 L12937,210 L13500,170 L14062,200 L14625,160 L15000,190 L15000,400 Z" fill="#4B5563" />
            </svg>
        </div>
        
        <!-- Layer 2: Hills (Wavy Line) -->
        <div class="parallax-layer hills" id="hills-layer">
            <svg width="100%" height="300" viewBox="0 0 15000 300" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Smooth wavy hills -->
                <path d="M0,300 L0,200 Q750,150 1500,200 Q2250,250 3000,200 Q3750,150 4500,200 Q5250,250 6000,200 Q6750,150 7500,200 Q8250,250 9000,200 Q9750,150 10500,200 Q11250,250 12000,200 Q12750,150 13500,200 Q14250,250 15000,200 L15000,300 Z" fill="#4ADE80" />
                
                <!-- Second hill layer -->
                <path d="M0,300 L0,250 Q375,220 750,250 Q1125,280 1500,250 Q1875,220 2250,250 Q2625,280 3000,250 Q3375,220 3750,250 Q4125,280 4500,250 Q4875,220 5250,250 Q5625,280 6000,250 Q6375,220 6750,250 Q7125,280 7500,250 Q7875,220 8250,250 Q8625,280 9000,250 Q9375,220 9750,250 Q10125,280 10500,250 Q10875,220 11250,250 Q11625,280 12000,250 Q12375,220 12750,250 Q12750,280 13125,250 Q13500,220 13875,250 Q14250,280 15000,250 L15000,300 Z" fill="#22C55E" />
            </svg>
        </div>
        
        <!-- Layer 3: Skyscrapers -->
        <div class="parallax-layer skyscrapers" id="skyscrapers-layer">
            <svg width="100%" height="350" viewBox="0 0 15000 350" xmlns="http://www.w3.org/2000/svg">
                <!-- Skyscrapers distributed across 15000px width -->
                <rect x="375" y="50" width="150" height="300" fill="#2563EB" />
                <rect x="750" y="20" width="115" height="330" fill="#7C3AED" />
                <rect x="1125" y="80" width="185" height="270" fill="#DC2626" />
                <rect x="1575" y="40" width="125" height="310" fill="#059669" />
                <rect x="2062" y="10" width="172" height="340" fill="#F59E0B" />
                <rect x="2625" y="70" width="162" height="280" fill="#8B5CF6" />
                <rect x="3000" y="30" width="138" height="320" fill="#EF4444" />
                <rect x="3375" y="90" width="172" height="260" fill="#10B981" />
                <rect x="3750" y="15" width="125" height="335" fill="#3B82F6" />
                <rect x="4125" y="60" width="150" height="290" fill="#F97316" />
                <rect x="4500" y="25" width="125" height="325" fill="#6366F1" />
                <rect x="4875" y="85" width="172" height="265" fill="#EC4899" />
                <rect x="5250" y="45" width="138" height="305" fill="#14B8A6" />
                <rect x="5625" y="20" width="162" height="330" fill="#F59E0B" />
                <rect x="6000" y="75" width="150" height="275" fill="#8B5CF6" />
                <rect x="6375" y="35" width="125" height="315" fill="#EF4444" />
                <rect x="6750" y="55" width="172" height="295" fill="#10B981" />
                <rect x="7125" y="10" width="125" height="340" fill="#3B82F6" />
                <rect x="7500" y="80" width="162" height="270" fill="#F97316" />
                <rect x="7875" y="40" width="138" height="310" fill="#6366F1" />
                <rect x="8250" y="65" width="150" height="285" fill="#EC4899" />
                <rect x="8625" y="25" width="172" height="325" fill="#14B8A6" />
                <rect x="9000" y="50" width="125" height="300" fill="#F59E0B" />
                <rect x="9375" y="15" width="162" height="335" fill="#8B5CF6" />
                <rect x="9750" y="70" width="138" height="280" fill="#EF4444" />
                <rect x="10125" y="30" width="172" height="320" fill="#10B981" />
                <rect x="10500" y="85" width="125" height="265" fill="#3B82F6" />
                <rect x="10875" y="45" width="150" height="305" fill="#F97316" />
                <rect x="11250" y="20" width="138" height="330" fill="#6366F1" />
                <rect x="11625" y="60" width="172" height="290" fill="#EC4899" />
                <rect x="12000" y="35" width="125" height="315" fill="#14B8A6" />
                <rect x="12375" y="75" width="162" height="275" fill="#F59E0B" />
                <rect x="12750" y="25" width="150" height="325" fill="#8B5CF6" />
                <rect x="13125" y="55" width="138" height="295" fill="#EF4444" />
                <rect x="13500" y="40" width="172" height="310" fill="#10B981" />
                <rect x="13875" y="65" width="125" height="285" fill="#3B82F6" />
                <rect x="14250" y="30" width="162" height="320" fill="#F97316" />
                <rect x="14625" y="50" width="150" height="300" fill="#6366F1" />
            </svg>
        </div>
        
        <!-- Layer 4: Foreground (Houses and Trees) -->
        <div class="parallax-layer foreground" id="foreground-layer">
            <svg width="100%" height="200" viewBox="0 0 15000 200" xmlns="http://www.w3.org/2000/svg">
                <!-- Houses and trees distributed across 15000px width -->
                <g transform="translate(562, 100)">
                    <polygon points="0,30 69,0 149,30" fill="#6D6875" />
                    <rect x="0" y="30" width="149" height="82" fill="#E63946" />
                    <rect x="56" y="65" width="34" height="45" fill="#5C4742" />
                    <rect x="23" y="45" width="34" height="22" fill="#F8F9FA" />
                    <rect x="92" y="45" width="34" height="22" fill="#F8F9FA" />
                </g>
                
                <g transform="translate(843, 50)">
                    <rect x="34" y="120" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,120 92,120" fill="#2D6A4F" />
                    <polygon points="46,30 11,100 80,100" fill="#40916C" />
                </g>
                
                <g transform="translate(1125, 110)">
                    <polygon points="0,25 69,0 126,25" fill="#6D6875" />
                    <rect x="0" y="25" width="126" height="75" fill="#457B9D" />
                    <rect x="56" y="55" width="23" height="45" fill="#5C4742" />
                    <rect x="23" y="40" width="23" height="15" fill="#F8F9FA" />
                    <rect x="80" y="40" width="23" height="15" fill="#F8F9FA" />
                </g>
                
                <g transform="translate(1406, 40)">
                    <rect x="34" y="130" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,130 103,130" fill="#52B788" />
                    <polygon points="57,35 11,110 92,110" fill="#74C69D" />
                </g>
                
                <g transform="translate(1687, 105)">
                    <polygon points="0,28 80,0 161,28" fill="#6D6875" />
                    <rect x="0" y="28" width="161" height="82" fill="#F4A261" />
                    <rect x="69" y="60" width="34" height="45" fill="#5C4742" />
                    <rect x="23" y="43" width="34" height="22" fill="#F8F9FA" />
                    <rect x="103" y="43" width="34" height="22" fill="#F8F9FA" />
                </g>
                
                <g transform="translate(2250, 45)">
                    <rect x="46" y="125" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,125 115,125" fill="#2D6A4F" />
                </g>
                
                <g transform="translate(2625, 115)">
                    <polygon points="0,26 69,0 138,26" fill="#6D6875" />
                    <rect x="0" y="26" width="138" height="67" fill="#E76F51" />
                    <rect x="56" y="52" width="34" height="37" fill="#5C4742" />
                </g>
                
                <g transform="translate(3000, 55)">
                    <rect x="34" y="115" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,115 92,115" fill="#40916C" />
                </g>
                
                <g transform="translate(3375, 120)">
                    <polygon points="0,24 69,0 138,24" fill="#6D6875" />
                    <rect x="0" y="24" width="138" height="67" fill="#A8DADC" />
                </g>
                
                <g transform="translate(3750, 50)">
                    <rect x="34" y="120" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,120 103,120" fill="#52B788" />
                </g>
                
                <g transform="translate(4125, 108)">
                    <polygon points="0,27 69,0 149,27" fill="#6D6875" />
                    <rect x="0" y="27" width="149" height="75" fill="#E63946" />
                </g>
                
                <g transform="translate(4500, 48)">
                    <rect x="34" y="122" width="34" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,122 103,122" fill="#74C69D" />
                </g>
                
                <g transform="translate(4875, 112)">
                    <polygon points="0,25 69,0 138,25" fill="#6D6875" />
                    <rect x="0" y="25" width="138" height="75" fill="#457B9D" />
                </g>
                
                <g transform="translate(5250, 52)">
                    <rect x="34" y="118" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,118 92,118" fill="#2D6A4F" />
                </g>
                
                <g transform="translate(5625, 106)">
                    <polygon points="0,26 69,0 149,26" fill="#6D6875" />
                    <rect x="0" y="26" width="149" height="82" fill="#F4A261" />
                </g>
                
                <g transform="translate(6000, 46)">
                    <rect x="46" y="124" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,124 115,124" fill="#40916C" />
                </g>
                
                <g transform="translate(6375, 114)">
                    <polygon points="0,24 69,0 126,24" fill="#6D6875" />
                    <rect x="0" y="24" width="126" height="75" fill="#E76F51" />
                </g>
                
                <g transform="translate(6750, 54)">
                    <rect x="34" y="116" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,116 92,116" fill="#52B788" />
                </g>
                
                <g transform="translate(7125, 110)">
                    <polygon points="0,25 69,0 138,25" fill="#6D6875" />
                    <rect x="0" y="25" width="138" height="75" fill="#A8DADC" />
                </g>
                
                <g transform="translate(7500, 49)">
                    <rect x="34" y="121" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,121 103,121" fill="#74C69D" />
                </g>
                
                <g transform="translate(7875, 107)">
                    <polygon points="0,27 80,0 149,27" fill="#6D6875" />
                    <rect x="0" y="27" width="149" height="82" fill="#E63946" />
                </g>
                
                <g transform="translate(8250, 51)">
                    <rect x="34" y="119" width="34" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,119 103,119" fill="#2D6A4F" />
                </g>
                
                <g transform="translate(8625, 113)">
                    <polygon points="0,24 69,0 138,24" fill="#6D6875" />
                    <rect x="0" y="24" width="138" height="75" fill="#457B9D" />
                </g>
                
                <g transform="translate(9000, 47)">
                    <rect x="34" y="123" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,123 92,123" fill="#40916C" />
                </g>
                
                <g transform="translate(9375, 109)">
                    <polygon points="0,26 69,0 149,26" fill="#6D6875" />
                    <rect x="0" y="26" width="149" height="75" fill="#F4A261" />
                </g>
                
                <g transform="translate(9750, 53)">
                    <rect x="46" y="117" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,117 115,117" fill="#52B788" />
                </g>
                
                <g transform="translate(10125, 111)">
                    <polygon points="0,25 69,0 138,25" fill="#6D6875" />
                    <rect x="0" y="25" width="138" height="75" fill="#E76F51" />
                </g>
                
                <g transform="translate(10500, 48)">
                    <rect x="34" y="122" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,122 92,122" fill="#74C69D" />
                </g>
                
                <g transform="translate(10875, 105)">
                    <polygon points="0,27 69,0 149,27" fill="#6D6875" />
                    <rect x="0" y="27" width="149" height="82" fill="#A8DADC" />
                </g>
                
                <g transform="translate(11250, 50)">
                    <rect x="34" y="120" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,120 103,120" fill="#2D6A4F" />
                </g>
                
                <g transform="translate(11625, 108)">
                    <polygon points="0,26 69,0 138,26" fill="#6D6875" />
                    <rect x="0" y="26" width="138" height="82" fill="#E63946" />
                </g>
                
                <g transform="translate(12000, 52)">
                    <rect x="34" y="118" width="34" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,118 103,118" fill="#40916C" />
                </g>
                
                <g transform="translate(12375, 112)">
                    <polygon points="0,24 69,0 126,24" fill="#6D6875" />
                    <rect x="0" y="24" width="126" height="75" fill="#457B9D" />
                </g>
                
                <g transform="translate(12750, 49)">
                    <rect x="34" y="121" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,121 92,121" fill="#52B788" />
                </g>
                
                <g transform="translate(13125, 106)">
                    <polygon points="0,25 80,0 161,25" fill="#6D6875" />
                    <rect x="0" y="25" width="161" height="82" fill="#F4A261" />
                </g>
                
                <g transform="translate(13500, 54)">
                    <rect x="46" y="116" width="34" height="37" fill="#7D5A50" />
                    <polygon points="57,0 0,116 115,116" fill="#74C69D" />
                </g>
                
                <g transform="translate(13875, 110)">
                    <polygon points="0,26 69,0 138,26" fill="#6D6875" />
                    <rect x="0" y="26" width="138" height="75" fill="#E76F51" />
                </g>
                
                <g transform="translate(14250, 51)">
                    <rect x="34" y="119" width="23" height="37" fill="#7D5A50" />
                    <polygon points="46,0 0,119 92,119" fill="#2D6A4F" />
                </g>
                
                <g transform="translate(14625, 107)">
                    <polygon points="0,27 57,0 115,27" fill="#6D6875" />
                    <rect x="0" y="27" width="115" height="75" fill="#A8DADC" />
                </g>
            </svg>
        </div>
        
        <!-- Anchor points with content -->
        <div class="hover-container anchor-1" id="anchor1">
            <div class="w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 1</strong><br/>Benvenuto nel primo punto di ancoraggio! Questo √® l'inizio del nostro viaggio parallasse.</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-2" id="anchor2">
            <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="25" fill="#FDB813" />
                <g stroke="#FDB813" stroke-width="6" stroke-linecap="round">
                    <line x1="50" y1="15" x2="50" y2="5" />
                    <line x1="50" y1="95" x2="50" y2="85" />
                    <line x1="15" y1="50" x2="5" y2="50" />
                    <line x1="95" y1="50" x2="85" y2="50" />
                    <line x1="25.5" y1="25.5" x2="18.5" y2="18.5" />
                    <line x1="74.5" y1="74.5" x2="81.5" y2="81.5" />
                    <line x1="25.5" y1="74.5" x2="18.5" y2="81.5" />
                    <line x1="74.5" y1="25.5" x2="81.5" y2="18.5" />
                </g>
                <g fill="#FF8C00">
                    <circle cx="42" cy="45" r="3" />
                    <circle cx="58" cy="45" r="3" />
                    <path d="M42,60 Q50,67 58,60" fill="none" stroke="#FF8C00" stroke-width="2" stroke-linecap="round" />
                </g>
            </svg>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Il Sole ‚òÄÔ∏è</strong><br/>Ciao! Sono il sole! Porto luce e calore a tutto il paesaggio parallasse!</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-3" id="anchor3">
            <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">3</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 3 üåø</strong><br/>Qui siamo nel cuore del paesaggio! Osserva come le colline verdi si muovono dolcemente.</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-4" id="anchor4">
            <div class="w-20 h-20 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">4</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 4 üèôÔ∏è</strong><br/>Siamo nella zona urbana! I grattacieli colorati creano uno skyline dinamico.</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-5" id="anchor5">
            <div class="w-20 h-20 bg-pink-500 rounded-full flex items-center justify-center text-white font-bold">5</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 5 üèòÔ∏è</strong><br/>Zona residenziale! Qui puoi vedere le casette colorate e gli alberi del primo piano.</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-6" id="anchor6">
            <div class="w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold">6</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 6 üåÑ</strong><br/>Quasi alla fine! Osserva come tutti i livelli parallasse lavorano insieme armoniosamente.</p>
                </div>
            </div>
        </div>
        
        <div class="hover-container anchor-7" id="anchor7">
            <div class="w-20 h-20 bg-red-500 rounded-full flex items-center justify-center text-white font-bold">7</div>
            
            <div class="cloud-bubble">
                <svg width="100%" height="100%" viewBox="0 0 220 130">
                    <path class="cloud-path" d="M200,65 C200,35 180,15 150,15 C130,15 110,25 100,45 C90,25 60,25 50,45 C30,45 20,55 20,75 C20,95 40,115 60,115 H150 C180,115 200,95 200,65 Z M60,115 L50,125 L65,110" />
                </svg>
                <div class="cloud-text">
                    <p><strong>Punto 7 üéØ</strong><br/>Fine del viaggio! Hai esplorato tutto il paesaggio parallasse. Complimenti!</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Fixed menu in the left corner -->
    <div class="fixed-menu">
        <div class="anchor-point" onclick="scrollToAnchor(1071)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 1 (1071, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(2143)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Sole (2143, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(3214)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 3 (3214, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(4286)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 4 (4286, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(5357)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 5 (5357, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(6429)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 6 (6429, 100)</div>
        </div>
        <div class="anchor-point" onclick="scrollToAnchor(7500)">
            <div class="anchor-point-dot"></div>
            <div class="anchor-point-text">Punto 7 (7500, 100)</div>
        </div>
    </div>
    
    <div class="instructions">
        Scroll orizzontalmente per vedere l'effetto parallasse a 4 livelli ‚ÜîÔ∏è o usa il menu per navigare
    </div>
    
    <!-- Return to start button -->
    <button id="return-button" onclick="returnToStart()" onmouseover="this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 -8px 20px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 -4px 12px rgba(0,0,0,0.2)'" style="position: fixed; bottom: 0; right: 100px; width: 100px; height: 60px; background: linear-gradient(45deg, #FF6B6B, #4ECDC4); color: white; border: none; border-radius: 15px 15px 0 0; font-weight: bold; font-size: 12px; cursor: pointer; box-shadow: 0 -4px 12px rgba(0,0,0,0.2); transition: all 0.3s ease; z-index: 900;">
        üè† INIZIO
    </button>
    
    <div class="redirect-message" id="redirect-message">
        Ritorno all'inizio...
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('parallax-container');
            const mountainsLayer = document.getElementById('mountains-layer');
            const hillsLayer = document.getElementById('hills-layer');
            const skyscrapersLayer = document.getElementById('skyscrapers-layer');
            const foregroundLayer = document.getElementById('foreground-layer');
            const redirectMessage = document.getElementById('redirect-message');
            
            // Set initial positions
            mountainsLayer.style.transform = 'translateX(0px)';
            hillsLayer.style.transform = 'translateX(0px)';
            skyscrapersLayer.style.transform = 'translateX(0px)';
            foregroundLayer.style.transform = 'translateX(0px)';
            
            // Define the maximum scroll position
            const maxScroll = 7500;
            const redirectThreshold = 7100;
            const warningThreshold = 6600;
            
            // Track scroll position
            let scrollPosition = 0;
            let isRedirecting = false;
            
            // Function to update parallax effect (4 layers)
            function updateParallax() {
                // Layer 1: Mountains move slowest (background)
                mountainsLayer.style.transform = `translateX(${-scrollPosition * 0.1}px)`;
                // Layer 2: Hills move at slow-medium speed
                hillsLayer.style.transform = `translateX(${-scrollPosition * 0.3}px)`;
                // Layer 3: Skyscrapers move at medium-fast speed
                skyscrapersLayer.style.transform = `translateX(${-scrollPosition * 0.6}px)`;
                // Layer 4: Foreground (houses and trees) moves fastest
                foregroundLayer.style.transform = `translateX(${-scrollPosition * 0.9}px)`;
            }
            
            // Function to handle scroll events and infinite scroll
            function handleScroll() {
                scrollPosition = window.scrollX;
                updateParallax();
                
                // Update instruction text based on position
                if (scrollPosition >= warningThreshold) {
                    document.querySelector('.instructions').textContent = 'Stai per raggiungere la fine della pagina!';
                    document.querySelector('.instructions').style.backgroundColor = 'rgba(255, 193, 7, 0.8)';
                } else {
                    document.querySelector('.instructions').textContent = 'Scroll orizzontalmente per vedere l\'effetto parallasse a 4 livelli ‚ÜîÔ∏è o usa il menu per navigare';
                    document.querySelector('.instructions').style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                }
                
                // Check for infinite scroll
                const maxScrollLeft = document.body.scrollWidth - window.innerWidth;
                
                if (scrollPosition >= Math.min(redirectThreshold, maxScrollLeft - 50) && !isRedirecting) {
                    isRedirecting = true;
                    
                    window.scrollTo({
                        left: 0,
                        behavior: 'instant'
                    });
                    
                    setTimeout(function() {
                        isRedirecting = false;
                    }, 100);
                }
            }
            
            // Create scroll effect - listen to both scroll events and direct scrollbar manipulation
            window.addEventListener('scroll', handleScroll);
            
            // Enhanced tracking for all scroll methods including scrollbar dragging
            let lastScrollPosition = 0;
            let scrollCheckInterval = setInterval(function() {
                const currentScroll = window.scrollX;
                
                // Check if scroll position changed
                if (currentScroll !== lastScrollPosition && !isRedirecting) {
                    lastScrollPosition = currentScroll;
                    
                    // Direct check for infinite scroll trigger
                    if (currentScroll >= redirectThreshold) {
                        isRedirecting = true;
                        
                        // Immediate redirect to beginning
                        window.scrollTo({
                            left: 0,
                            behavior: 'instant'
                        });
                        
                        // Reset flag after brief delay
                        setTimeout(function() {
                            isRedirecting = false;
                            lastScrollPosition = 0;
                        }, 50);
                    } else {
                        // Update parallax for normal scrolling
                        scrollPosition = currentScroll;
                        updateParallax();
                        
                        // Update instruction text
                        if (scrollPosition >= warningThreshold) {
                            document.querySelector('.instructions').textContent = 'Stai per raggiungere la fine della pagina!';
                            document.querySelector('.instructions').style.backgroundColor = 'rgba(255, 193, 7, 0.8)';
                        } else {
                            document.querySelector('.instructions').textContent = 'Scroll orizzontalmente per vedere l\'effetto parallasse a 4 livelli ‚ÜîÔ∏è o usa il menu per navigare';
                            document.querySelector('.instructions').style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                        }
                    }
                }
            }, 8); // Check every 8ms for ultra-responsive tracking
            
            // Additional mouse and touch event listeners for maximum coverage
            let isMouseDown = false;
            
            // Track mouse events on scrollbar
            document.addEventListener('mousedown', function(e) {
                isMouseDown = true;
            });
            
            document.addEventListener('mouseup', function(e) {
                isMouseDown = false;
                // Force check after mouse release
                setTimeout(function() {
                    if (window.scrollX >= redirectThreshold && !isRedirecting) {
                        isRedirecting = true;
                        window.scrollTo({ left: 0, behavior: 'instant' });
                        setTimeout(() => { isRedirecting = false; }, 50);
                    }
                }, 10);
            });
            
            // Track touch events for mobile
            document.addEventListener('touchend', function(e) {
                setTimeout(function() {
                    if (window.scrollX >= redirectThreshold && !isRedirecting) {
                        isRedirecting = true;
                        window.scrollTo({ left: 0, behavior: 'instant' });
                        setTimeout(() => { isRedirecting = false; }, 50);
                    }
                }, 10);
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                updateParallax();
            });
        });
        
        // Function to scroll to anchor points
        function scrollToAnchor(position) {
            window.scrollTo({
                left: position - window.innerWidth / 2,
                behavior: 'smooth'
            });
        }
        
        // Function to return to start with infinite scroll effect
        function returnToStart() {
            isRedirecting = true;
            
            // Show redirect message briefly
            const redirectMsg = document.getElementById('redirect-message');
            redirectMsg.style.display = 'block';
            redirectMsg.style.position = 'fixed';
            redirectMsg.style.top = '50%';
            redirectMsg.style.left = '50%';
            redirectMsg.style.transform = 'translate(-50%, -50%)';
            redirectMsg.style.background = 'rgba(0,0,0,0.8)';
            redirectMsg.style.color = 'white';
            redirectMsg.style.padding = '20px 40px';
            redirectMsg.style.borderRadius = '10px';
            redirectMsg.style.fontSize = '18px';
            redirectMsg.style.zIndex = '1000';
            
            // Immediate return to beginning
            setTimeout(function() {
                window.scrollTo({
                    left: 0,
                    behavior: 'instant'
                });
                
                // Hide message after brief delay
                setTimeout(function() {
                    redirectMsg.style.display = 'none';
                    isRedirecting = false;
                }, 500);
            }, 200);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96e2107d3476f7fb',t:'MTc1NTAyMzY0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

